"use strict";(self.webpackChunkbellavista_care_homes=self.webpackChunkbellavista_care_homes||[]).push([[153],{153:(t,e,r)=>{r.r(e),r.d(e,{default:()=>s});var o=r(950),n=r(903),a=r(414);const s=()=>{const[t,e]=(0,o.useState)(""),[r,s]=(0,o.useState)(!1),[i,c]=(0,o.useState)("");(0,o.useEffect)(()=>{const t={"Environment Variable":"https://bellavista-backend-production.up.railway.app/api/tours","Test Connection URL":n.Sn.TEST_CONNECTION,"Book Tour URL":n.Sn.BOOK_TOUR,"All Environment Variables":Object.keys({NODE_ENV:"production",PUBLIC_URL:"/bellavista-react-converted",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://bellavista-backend-production.up.railway.app/api/tours",REACT_APP_LOCAL_API_URL:"http://localhost:8000/api/tours",REACT_APP_NAME:"Bellavista Care Homes",REACT_APP_VERSION:"1.0.0"}).filter(t=>t.startsWith("REACT_APP_")).reduce((t,e)=>(t[e]={NODE_ENV:"production",PUBLIC_URL:"/bellavista-react-converted",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://bellavista-backend-production.up.railway.app/api/tours",REACT_APP_LOCAL_API_URL:"http://localhost:8000/api/tours",REACT_APP_NAME:"Bellavista Care Homes",REACT_APP_VERSION:"1.0.0"}[e],t),{})};c(JSON.stringify(t,null,2))},[]);return(0,a.jsxs)("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"},children:[(0,a.jsx)("h2",{children:"API Test Page"}),(0,a.jsx)("h3",{children:"Current API Configuration:"}),(0,a.jsx)("pre",{style:{background:"#e8f4fd",padding:"15px",borderRadius:"5px",overflow:"auto",fontSize:"12px",marginBottom:"20px",border:"1px solid #007bff"},children:i}),(0,a.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,a.jsx)("button",{onClick:async()=>{s(!0);try{const t=await(0,n.rN)();e(JSON.stringify(t,null,2))}catch(t){e("Error: ".concat(t.message))}s(!1)},disabled:r,style:{marginRight:"10px",padding:"10px 20px"},children:"Test Connection"}),(0,a.jsx)("button",{onClick:async()=>{s(!0);try{const t=new Date;t.setDate(t.getDate()+1);const r={first_name:"Test",last_name:"User",email:"test@example.com",phone_number:"+1234567890",preferred_home:"cardiff",preferred_date:t.toISOString().split("T")[0],preferred_time:"10:00",notes:"Test booking"},o=await(0,n.sY)(r);e(JSON.stringify(o,null,2))}catch(t){e("Error: ".concat(t.message))}s(!1)},disabled:r,style:{padding:"10px 20px"},children:"Test Booking"})]}),r&&(0,a.jsx)("div",{children:"Loading..."}),(0,a.jsx)("h3",{children:"API Response:"}),(0,a.jsx)("pre",{style:{background:"#f5f5f5",padding:"20px",borderRadius:"5px",overflow:"auto",fontSize:"12px"},children:t||"Click a button to test the API"})]})}},555:(t,e,r)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}function a(t,e,r){return(e=n(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach(function(e){a(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}r.d(e,{A:()=>i})},903:(t,e,r)=>{r.d(e,{Sn:()=>a,rN:()=>c,sY:()=>i});var o=r(555);const n="https://bellavista-backend-production.up.railway.app/api/tours";console.log("\ud83d\udd17 API Configuration:",{"Environment Variable":"https://bellavista-backend-production.up.railway.app/api/tours","Using URL":n,"Primary URL":"https://bellavista-backend-3.onrender.com/api/tours"});const a={BOOK_TOUR:"".concat(n,"/book/"),LIST_BOOKINGS:"".concat(n,"/bookings/"),UPDATE_STATUS:t=>"".concat(n,"/bookings/").concat(t,"/status/"),TEST_CONNECTION:"".concat(n,"/test/"),AVAILABLE_SLOTS:"".concat(n,"/available-slots/"),BOOKING_STATS:"".concat(n,"/stats/"),FIND_NEAREST_HOME:"".concat(n,"/find-nearest-home/"),EXPORT_BOOKINGS:"".concat(n,"/export/")},s=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={headers:{"Content-Type":"application/json"}};try{const n=new AbortController,a=setTimeout(()=>n.abort(),15e3),s=await fetch(t,(0,o.A)((0,o.A)((0,o.A)({},r),e),{},{signal:n.signal}));if(clearTimeout(a),!s.ok)throw new Error("HTTP error! status: ".concat(s.status));return{success:!0,data:await s.json(),status:s.status}}catch(n){return console.error("API Request Error:",n),"AbortError"===n.name?{success:!1,data:{message:"Request timeout (15s). Server may be busy - please try again."},status:0}:{success:!1,data:{message:"Network error. Please check your connection."},status:0}}},i=async t=>s(a.BOOK_TOUR,{method:"POST",body:JSON.stringify(t)}),c=async()=>s(a.TEST_CONNECTION)}}]);