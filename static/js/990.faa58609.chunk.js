"use strict";(self.webpackChunkbellavista_care_homes=self.webpackChunkbellavista_care_homes||[]).push([[990],{555:(e,t,o)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function n(e,t,o){return(t=a(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,r)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach(function(t){n(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}o.d(t,{A:()=>s})},903:(e,t,o)=>{o.d(t,{Sn:()=>n,rN:()=>l,sY:()=>s});var r=o(555);const a="https://bellavista-backend-3.onrender.com/api/tours";console.log("\ud83d\udd17 API Configuration:",{"Environment Variable":"https://bellavista-backend-3.onrender.com/api/tours","Using URL":a,"Primary URL":"https://bellavista-backend-3.onrender.com/api/tours"});const n={BOOK_TOUR:"".concat(a,"/book/"),LIST_BOOKINGS:"".concat(a,"/bookings/"),UPDATE_STATUS:e=>"".concat(a,"/bookings/").concat(e,"/status/"),TEST_CONNECTION:"".concat(a,"/test/"),AVAILABLE_SLOTS:"".concat(a,"/available-slots/"),BOOKING_STATS:"".concat(a,"/stats/"),FIND_NEAREST_HOME:"".concat(a,"/find-nearest-home/"),EXPORT_BOOKINGS:"".concat(a,"/export/")},i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={headers:{"Content-Type":"application/json"}};try{const a=new AbortController,n=setTimeout(()=>a.abort(),15e3),i=await fetch(e,(0,r.A)((0,r.A)((0,r.A)({},o),t),{},{signal:a.signal}));if(clearTimeout(n),!i.ok)throw new Error("HTTP error! status: ".concat(i.status));return{success:!0,data:await i.json(),status:i.status}}catch(a){return console.error("API Request Error:",a),"AbortError"===a.name?{success:!1,data:{message:"Request timeout (15s). Server may be busy - please try again."},status:0}:{success:!1,data:{message:"Network error. Please check your connection."},status:0}}},s=async e=>i(n.BOOK_TOUR,{method:"POST",body:JSON.stringify(e)}),l=async()=>i(n.TEST_CONNECTION)},990:(e,t,o)=>{o.r(t),o.d(t,{default:()=>s});var r=o(555),a=o(950),n=o(903),i=o(414);const s=()=>{const[e,t]=(0,a.useState)({firstName:"",lastName:"",email:"",phone:"",tourDate:"",tourTime:"",homeLocation:"",notes:""}),o=(new Date).toISOString().split("T")[0],[s,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(""),[p,m]=(0,a.useState)({}),[u,x]=(0,a.useState)(!1),h=e=>{const{name:o,value:a}=e.target;t(e=>(0,r.A)((0,r.A)({},e),{},{[o]:a}))};return(0,i.jsx)("section",{style:{padding:"60px 0",background:"var(--bg-light)"},children:(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("div",{className:"tour-container",children:s?(0,i.jsxs)("div",{className:"booking-success",style:{textAlign:"center",background:"white",padding:"60px 40px",borderRadius:"15px",boxShadow:"var(--shadow)",maxWidth:"500px",margin:"0 auto"},children:[(0,i.jsx)("i",{className:"fas fa-check-circle",style:{fontSize:"48px",color:"#28a745",marginBottom:"20px"}}),(0,i.jsx)("h3",{children:"\u2705 Tour Scheduled Successfully!"}),(0,i.jsxs)("div",{className:"booking-id",style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",fontWeight:"700",fontSize:"18px",margin:"20px 0",border:"2px solid #28a745"},children:["Booking ID: #",c]}),(0,i.jsx)("p",{style:{marginTop:"20px",fontSize:"16px"},children:"\ud83d\udce7 Confirmation email sent!"}),(0,i.jsx)("p",{style:{color:"#666"},children:"We'll contact you within 24 hours to confirm details."}),(0,i.jsx)("button",{className:"btn",onClick:()=>{window.location.href="/"},style:{marginTop:"20px",background:"linear-gradient(135deg, #28a745, #20c997)",color:"white",border:"none",padding:"14px 32px",borderRadius:"30px",fontWeight:"700"},children:"\ud83c\udfe0 Return to Home"})]}):(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"section-title",children:"Schedule a Tour"}),(0,i.jsx)("p",{style:{textAlign:"center",marginBottom:"30px",color:"var(--text-medium)"},children:"Book a personalized tour of our facilities and meet our caring staff."}),(0,i.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),m({}),x(!0);try{const t={first_name:e.firstName,last_name:e.lastName,email:e.email,phone_number:e.phone,preferred_home:e.homeLocation||"cardiff",preferred_date:e.tourDate,preferred_time:e.tourTime,notes:e.notes},i=await(0,n.sY)(t);if(i.success&&i.data.success)d(i.data.booking_id),l(!0),setTimeout(()=>{i.data.email_sent?alert("\u2705 Confirmation email sent to your inbox!"):alert("\u2705 Tour booked! Email failed to send, but we'll contact you within 24 hours.")},500);else{var o,a;const e=(null===(o=i.data)||void 0===o?void 0:o.message)||"Failed to submit booking",t=(null===(a=i.data)||void 0===a?void 0:a.errors)||{};m((0,r.A)({general:e},t))}}catch(i){console.error("Booking submission error:",i),i.message.includes("timeout")?(d("PENDING"),l(!0),setTimeout(()=>{alert("\u2705 Booking likely successful! We'll contact you within 24 hours to confirm.")},500)):m({general:"Connection failed. Please check your internet or try again in a moment."})}finally{x(!1)}},style:{maxWidth:"600px",margin:"0 auto",background:"white",padding:"40px",borderRadius:"15px",boxShadow:"var(--shadow)"},children:[p.general&&(0,i.jsx)("div",{style:{background:"#fee",color:"#c33",padding:"10px",borderRadius:"5px",marginBottom:"20px",border:"1px solid #fcc"},children:p.general}),(0,i.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"First Name *"}),(0,i.jsx)("input",{type:"text",name:"firstName",className:"form-control",value:e.firstName,onChange:h,style:{width:"100%",padding:"12px 15px",border:"2px solid ".concat(p.first_name?"#e74c3c":"#e0e0e0"),borderRadius:"8px"},required:!0}),p.first_name&&(0,i.jsx)("div",{style:{color:"#e74c3c",fontSize:"14px",marginTop:"5px"},children:p.first_name[0]})]}),(0,i.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"Last Name"}),(0,i.jsx)("input",{type:"text",name:"lastName",className:"form-control",value:e.lastName,onChange:h,style:{width:"100%",padding:"12px 15px",border:"2px solid ".concat(p.last_name?"#e74c3c":"#e0e0e0"),borderRadius:"8px"}}),p.last_name&&(0,i.jsx)("div",{style:{color:"#e74c3c",fontSize:"14px",marginTop:"5px"},children:p.last_name[0]})]}),(0,i.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"Email Address *"}),(0,i.jsx)("input",{type:"email",name:"email",className:"form-control",value:e.email,onChange:h,style:{width:"100%",padding:"12px 15px",border:"2px solid ".concat(p.email?"#e74c3c":"#e0e0e0"),borderRadius:"8px"},required:!0}),p.email&&(0,i.jsx)("div",{style:{color:"#e74c3c",fontSize:"14px",marginTop:"5px"},children:p.email[0]})]}),(0,i.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"Phone Number *"}),(0,i.jsx)("input",{type:"tel",name:"phone",className:"form-control",value:e.phone,onChange:h,style:{width:"100%",padding:"12px 15px",border:"2px solid ".concat(p.phone_number?"#e74c3c":"#e0e0e0"),borderRadius:"8px"},required:!0}),p.phone_number&&(0,i.jsx)("div",{style:{color:"#e74c3c",fontSize:"14px",marginTop:"5px"},children:p.phone_number[0]})]}),(0,i.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"Preferred Tour Date *"}),(0,i.jsx)("input",{type:"date",name:"tourDate",className:"form-control",value:e.tourDate,onChange:h,min:o,style:{width:"100%",padding:"12px 15px",border:"2px solid ".concat(p.preferred_date?"#e74c3c":"#e0e0e0"),borderRadius:"8px"},required:!0}),p.preferred_date&&(0,i.jsx)("div",{style:{color:"#e74c3c",fontSize:"14px",marginTop:"5px"},children:p.preferred_date[0]})]}),(0,i.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"Preferred Time *"}),(0,i.jsxs)("select",{name:"tourTime",className:"form-control",value:e.tourTime,onChange:h,style:{width:"100%",padding:"12px 15px",border:"2px solid ".concat(p.preferred_time?"#e74c3c":"#e0e0e0"),borderRadius:"8px"},required:!0,children:[(0,i.jsx)("option",{value:"",children:"Select a time"}),(0,i.jsx)("option",{value:"09:00",children:"9:00 AM"}),(0,i.jsx)("option",{value:"10:00",children:"10:00 AM"}),(0,i.jsx)("option",{value:"11:00",children:"11:00 AM"}),(0,i.jsx)("option",{value:"14:00",children:"2:00 PM"}),(0,i.jsx)("option",{value:"15:00",children:"3:00 PM"}),(0,i.jsx)("option",{value:"16:00",children:"4:00 PM"})]}),p.preferred_time&&(0,i.jsx)("div",{style:{color:"#e74c3c",fontSize:"14px",marginTop:"5px"},children:p.preferred_time[0]})]}),(0,i.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"Location *"}),(0,i.jsxs)("select",{name:"homeLocation",className:"form-control",value:e.homeLocation,onChange:h,style:{width:"100%",padding:"12px 15px",border:"2px solid #e0e0e0",borderRadius:"8px"},required:!0,children:[(0,i.jsx)("option",{value:"",children:"Select location"}),(0,i.jsx)("option",{value:"cardiff",children:"Cardiff"}),(0,i.jsx)("option",{value:"barry",children:"Barry"}),(0,i.jsx)("option",{value:"waverley",children:"Waverley"}),(0,i.jsx)("option",{value:"college-fields",children:"College Fields"})]})]}),(0,i.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"Notes"}),(0,i.jsx)("textarea",{name:"notes",className:"form-control",rows:"3",placeholder:"Any specific requirements or questions...",value:e.notes,onChange:h,style:{width:"100%",padding:"12px 15px",border:"2px solid #e0e0e0",borderRadius:"8px",resize:"vertical"}})]}),(0,i.jsx)("button",{type:"submit",className:"btn",disabled:u,style:{width:"100%",marginTop:"20px",background:u?"#ccc":"var(--gradient)",color:"white",border:"none",padding:"14px 32px",borderRadius:"30px",fontWeight:"700",cursor:u?"not-allowed":"pointer"},children:u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("i",{className:"fas fa-spinner fa-spin"})," Booking Tour..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("i",{className:"fas fa-calendar-check"})," Schedule Tour"]})}),u&&(0,i.jsx)("div",{style:{textAlign:"center",marginTop:"15px",padding:"10px",background:"#e3f2fd",borderRadius:"5px",color:"#1976d2",fontSize:"14px"},children:"\u23f3 Please wait... Render server may take 10-30 seconds to wake up"})]})]})})})})}}}]);