"use strict";(self.webpackChunkbellavista_care_homes=self.webpackChunkbellavista_care_homes||[]).push([[990],{555:(e,t,o)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function n(e,t,o){return(t=a(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,r)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach(function(t){n(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}o.d(t,{A:()=>s})},903:(e,t,o)=>{o.d(t,{Sn:()=>n,rN:()=>l,sY:()=>s});var r=o(555);const a="https://bellavista-backend-3.onrender.com/api/tours";console.log("\ud83d\udd17 API Configuration:",{"Environment Variable":"https://bellavista-backend-3.onrender.com/api/tours","Using URL":a,"Primary URL":"https://bellavista-backend-3.onrender.com/api/tours"});const n={BOOK_TOUR:"".concat(a,"/book/"),LIST_BOOKINGS:"".concat(a,"/bookings/"),UPDATE_STATUS:e=>"".concat(a,"/bookings/").concat(e,"/status/"),TEST_CONNECTION:"".concat(a,"/test/"),AVAILABLE_SLOTS:"".concat(a,"/available-slots/"),BOOKING_STATS:"".concat(a,"/stats/"),FIND_NEAREST_HOME:"".concat(a,"/find-nearest-home/"),EXPORT_BOOKINGS:"".concat(a,"/export/")},i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={headers:{"Content-Type":"application/json"}};try{const a=new AbortController,n=setTimeout(()=>a.abort(),15e3),i=await fetch(e,(0,r.A)((0,r.A)((0,r.A)({},o),t),{},{signal:a.signal}));if(clearTimeout(n),!i.ok)throw new Error("HTTP error! status: ".concat(i.status));return{success:!0,data:await i.json(),status:i.status}}catch(a){return console.error("API Request Error:",a),"AbortError"===a.name?{success:!1,data:{message:"Request timeout (15s). Server may be busy - please try again."},status:0}:{success:!1,data:{message:"Network error. Please check your connection."},status:0}}},s=async e=>i(n.BOOK_TOUR,{method:"POST",body:JSON.stringify(e)}),l=async()=>i(n.TEST_CONNECTION)},990:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var r=o(555),a=o(950),n=o(429),i=o(903),s=o(414);const l=()=>{const e=(0,n.Zp)(),[t,o]=(0,a.useState)({firstName:"",lastName:"",email:"",phone:"",tourDate:"",tourTime:"",homeLocation:"",notes:""}),l=(new Date).toISOString().split("T")[0],[c,d]=(0,a.useState)(!1),[p,m]=(0,a.useState)(""),[u,x]=(0,a.useState)({}),[h,g]=(0,a.useState)(!1),f=e=>{const{name:t,value:a}=e.target;o(e=>(0,r.A)((0,r.A)({},e),{},{[t]:a}))};return(0,s.jsx)("section",{style:{padding:"60px 0",background:"var(--bg-light)"},children:(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"tour-container",children:c?(0,s.jsxs)("div",{className:"booking-success",style:{textAlign:"center",background:"white",padding:"60px 40px",borderRadius:"15px",boxShadow:"var(--shadow)",maxWidth:"500px",margin:"0 auto"},children:[(0,s.jsx)("i",{className:"fas fa-check-circle",style:{fontSize:"48px",color:"#28a745",marginBottom:"20px"}}),(0,s.jsx)("h3",{children:"\u2705 Tour Scheduled Successfully!"}),(0,s.jsxs)("div",{className:"booking-id",style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",fontWeight:"700",fontSize:"18px",margin:"20px 0",border:"2px solid #28a745"},children:["Booking ID: #",p]}),(0,s.jsx)("p",{style:{marginTop:"20px",fontSize:"16px"},children:"\ud83d\udce7 Confirmation email sent!"}),(0,s.jsx)("p",{style:{color:"#666"},children:"We'll contact you within 24 hours to confirm details."}),(0,s.jsx)("button",{className:"btn",onClick:()=>{e("/")},style:{marginTop:"20px",background:"linear-gradient(135deg, #28a745, #20c997)",color:"white",border:"none",padding:"14px 32px",borderRadius:"30px",fontWeight:"700"},children:"\ud83c\udfe0 Return to Home"})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"section-title",children:"Schedule a Tour"}),(0,s.jsx)("p",{style:{textAlign:"center",marginBottom:"30px",color:"var(--text-medium)"},children:"Book a personalized tour of our facilities and meet our caring staff."}),(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),x({}),g(!0);try{const e={first_name:t.firstName,last_name:t.lastName,email:t.email,phone_number:t.phone,preferred_home:t.homeLocation||"cardiff",preferred_date:t.tourDate,preferred_time:t.tourTime,notes:t.notes},n=await(0,i.sY)(e);if(n.success&&n.data.success)m(n.data.booking_id),d(!0),setTimeout(()=>{n.data.email_sent?alert("\u2705 Confirmation email sent to your inbox!"):alert("\u2705 Tour booked! Email failed to send, but we'll contact you within 24 hours.")},500);else{var o,a;const e=(null===(o=n.data)||void 0===o?void 0:o.message)||"Failed to submit booking",t=(null===(a=n.data)||void 0===a?void 0:a.errors)||{};x((0,r.A)({general:e},t))}}catch(n){console.error("Booking submission error:",n),n.message.includes("timeout")?(m("PENDING"),d(!0),setTimeout(()=>{alert("\u2705 Booking likely successful! We'll contact you within 24 hours to confirm.")},500)):x({general:"Connection failed. Please check your internet or try again in a moment."})}finally{g(!1)}},style:{maxWidth:"600px",margin:"0 auto",background:"white",padding:"40px",borderRadius:"15px",boxShadow:"var(--shadow)"},children:[u.general&&(0,s.jsx)("div",{style:{background:"#fee",color:"#c33",padding:"10px",borderRadius:"5px",marginBottom:"20px",border:"1px solid #fcc"},children:u.general}),(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,s.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"First Name *"}),(0,s.jsx)("input",{type:"text",name:"firstName",className:"form-control",value:t.firstName,onChange:f,style:{width:"100%",padding:"12px 15px",border:"2px solid ".concat(u.first_name?"#e74c3c":"#e0e0e0"),borderRadius:"8px"},required:!0}),u.first_name&&(0,s.jsx)("div",{style:{color:"#e74c3c",fontSize:"14px",marginTop:"5px"},children:u.first_name[0]})]}),(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,s.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"Last Name"}),(0,s.jsx)("input",{type:"text",name:"lastName",className:"form-control",value:t.lastName,onChange:f,style:{width:"100%",padding:"12px 15px",border:"2px solid ".concat(u.last_name?"#e74c3c":"#e0e0e0"),borderRadius:"8px"}}),u.last_name&&(0,s.jsx)("div",{style:{color:"#e74c3c",fontSize:"14px",marginTop:"5px"},children:u.last_name[0]})]}),(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,s.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"Email Address *"}),(0,s.jsx)("input",{type:"email",name:"email",className:"form-control",value:t.email,onChange:f,style:{width:"100%",padding:"12px 15px",border:"2px solid ".concat(u.email?"#e74c3c":"#e0e0e0"),borderRadius:"8px"},required:!0}),u.email&&(0,s.jsx)("div",{style:{color:"#e74c3c",fontSize:"14px",marginTop:"5px"},children:u.email[0]})]}),(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,s.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"Phone Number *"}),(0,s.jsx)("input",{type:"tel",name:"phone",className:"form-control",value:t.phone,onChange:f,style:{width:"100%",padding:"12px 15px",border:"2px solid ".concat(u.phone_number?"#e74c3c":"#e0e0e0"),borderRadius:"8px"},required:!0}),u.phone_number&&(0,s.jsx)("div",{style:{color:"#e74c3c",fontSize:"14px",marginTop:"5px"},children:u.phone_number[0]})]}),(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,s.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"Preferred Tour Date *"}),(0,s.jsx)("input",{type:"date",name:"tourDate",className:"form-control",value:t.tourDate,onChange:f,min:l,style:{width:"100%",padding:"12px 15px",border:"2px solid ".concat(u.preferred_date?"#e74c3c":"#e0e0e0"),borderRadius:"8px"},required:!0}),u.preferred_date&&(0,s.jsx)("div",{style:{color:"#e74c3c",fontSize:"14px",marginTop:"5px"},children:u.preferred_date[0]})]}),(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,s.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"Preferred Time *"}),(0,s.jsxs)("select",{name:"tourTime",className:"form-control",value:t.tourTime,onChange:f,style:{width:"100%",padding:"12px 15px",border:"2px solid ".concat(u.preferred_time?"#e74c3c":"#e0e0e0"),borderRadius:"8px"},required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select a time"}),(0,s.jsx)("option",{value:"09:00",children:"9:00 AM"}),(0,s.jsx)("option",{value:"10:00",children:"10:00 AM"}),(0,s.jsx)("option",{value:"11:00",children:"11:00 AM"}),(0,s.jsx)("option",{value:"14:00",children:"2:00 PM"}),(0,s.jsx)("option",{value:"15:00",children:"3:00 PM"}),(0,s.jsx)("option",{value:"16:00",children:"4:00 PM"})]}),u.preferred_time&&(0,s.jsx)("div",{style:{color:"#e74c3c",fontSize:"14px",marginTop:"5px"},children:u.preferred_time[0]})]}),(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,s.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"Location *"}),(0,s.jsxs)("select",{name:"homeLocation",className:"form-control",value:t.homeLocation,onChange:f,style:{width:"100%",padding:"12px 15px",border:"2px solid #e0e0e0",borderRadius:"8px"},required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select location"}),(0,s.jsx)("option",{value:"cardiff",children:"Cardiff"}),(0,s.jsx)("option",{value:"barry",children:"Barry"}),(0,s.jsx)("option",{value:"waverley",children:"Waverley"}),(0,s.jsx)("option",{value:"college-fields",children:"College Fields"})]})]}),(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"20px"},children:[(0,s.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"Notes"}),(0,s.jsx)("textarea",{name:"notes",className:"form-control",rows:"3",placeholder:"Any specific requirements or questions...",value:t.notes,onChange:f,style:{width:"100%",padding:"12px 15px",border:"2px solid #e0e0e0",borderRadius:"8px",resize:"vertical"}})]}),(0,s.jsx)("button",{type:"submit",className:"btn",disabled:h,style:{width:"100%",marginTop:"20px",background:h?"#ccc":"var(--gradient)",color:"white",border:"none",padding:"14px 32px",borderRadius:"30px",fontWeight:"700",cursor:h?"not-allowed":"pointer"},children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-spinner fa-spin"})," Booking Tour..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-calendar-check"})," Schedule Tour"]})}),h&&(0,s.jsx)("div",{style:{textAlign:"center",marginTop:"15px",padding:"10px",background:"#e3f2fd",borderRadius:"5px",color:"#1976d2",fontSize:"14px"},children:"\u23f3 Please wait... Render server may take 10-30 seconds to wake up"})]})]})})})})}}}]);